{
  "meta": {
    "sistema": "INTEIA",
    "versao": "2.0.0",
    "autor": "Dr. Igor Morais Vasconcelos PhD",
    "organizacao": "INTEIA - Inteligência Estratégica",
    "funcao": "Coach de Engenharia de Contexto Claude Code",
    "fonte": "Anthropic Official Engineering Blog + Docs 2025"
  },

  "leis_fundamentais": [
    {
      "id": 1,
      "nome": "Economia de Tokens",
      "peso": 5,
      "principio": "Cada token tem custo cognitivo",
      "regra": "Manter janela <40% para tarefas complexas",
      "acao": "/clear ou /compact quando >40%"
    },
    {
      "id": 2,
      "nome": "Verificação Obrigatória",
      "peso": 5,
      "principio": "Output sem verificação = não confiável",
      "regra": "Todo código requer critério testável",
      "acao": "Definir testes/comandos de validação"
    },
    {
      "id": 3,
      "nome": "Reset > Correção",
      "peso": 5,
      "principio": "Contexto poluído prejudica mais que ajuda",
      "regra": "2 falhas consecutivas → reset",
      "acao": "/clear + prompt refinado"
    },
    {
      "id": 4,
      "nome": "Exploração Antes Ação",
      "peso": 4,
      "principio": "Entendimento precede implementação",
      "regra": "Ler código ANTES de propor mudanças",
      "acao": "Plan Mode para tarefas complexas"
    },
    {
      "id": 5,
      "nome": "Simplicidade Estratégica",
      "peso": 4,
      "principio": "Código mais simples = código melhor",
      "regra": "Só implementar o diretamente solicitado",
      "acao": "Prompt explícito anti-over-engineering"
    }
  ],

  "decisoes_rapidas": {
    "quando_clear": {
      "contexto_maior_60_porcento": true,
      "duas_ou_mais_falhas": true,
      "mudanca_de_tarefa": true,
      "claude_esquece_instrucoes": true,
      "sessao_longa_mesmo_topico": "avaliar"
    },
    "quando_subagente": {
      "investigacao_maior_10_arquivos": true,
      "verificacao_pos_codigo": true,
      "pesquisa_paralela": true,
      "tarefa_menor_5_arquivos": false,
      "mudanca_requer_contexto": false
    },
    "quando_plan_mode": {
      "fix_simples": false,
      "mudanca_1_arquivo_clara": false,
      "multiplos_arquivos": true,
      "abordagem_incerta": true,
      "codigo_desconhecido": true,
      "feature_nova": true
    }
  },

  "dicas_ponderadas": {
    "peso_5_critico": [
      {
        "dica": "Gestão agressiva de contexto com /clear",
        "fonte": "anthropic.com/engineering/claude-code-best-practices",
        "aplicacao": "Entre tarefas, após falhas, contexto alto"
      },
      {
        "dica": "Sempre fornecer critérios de verificação testáveis",
        "fonte": "code.claude.com/docs/en/best-practices",
        "aplicacao": "Todo código, toda implementação"
      },
      {
        "dica": "Reset após 2 correções falhas ao invés de continuar corrigindo",
        "fonte": "anthropic.com/engineering/effective-context-engineering",
        "aplicacao": "Quando mesmo erro persiste"
      },
      {
        "dica": "Dados longos no topo, query no fim do prompt (melhora até 30%)",
        "fonte": "platform.claude.com/docs/long-context-tips",
        "aplicacao": "Prompts com documentos grandes"
      },
      {
        "dica": "CLAUDE.md conciso <200 linhas, só o universalmente aplicável",
        "fonte": "humanlayer.dev/blog/writing-a-good-claude-md",
        "aplicacao": "Configuração inicial e revisões"
      }
    ],
    "peso_4_alto": [
      {
        "dica": "Workflow Explorar→Planejar→Codificar para tarefas complexas",
        "fonte": "anthropic.com/engineering/claude-code-best-practices",
        "aplicacao": "Tarefas multi-arquivo, incerteza"
      },
      {
        "dica": "Extended thinking (think/think hard/ultrathink) para raciocínio complexo",
        "fonte": "platform.claude.com/docs/claude-4-best-practices",
        "aplicacao": "Decisões arquiteturais, bugs difíceis"
      },
      {
        "dica": "Evitar over-engineering explicitamente no prompt",
        "fonte": "anthropic.com/engineering/claude-code-best-practices",
        "aplicacao": "Todo desenvolvimento"
      },
      {
        "dica": "XML tags para estruturar documentos múltiplos",
        "fonte": "platform.claude.com/docs/long-context-tips",
        "aplicacao": "Prompts com múltiplas fontes"
      },
      {
        "dica": "Preservar decisões arquiteturais na compactação",
        "fonte": "anthropic.com/engineering/effective-context-engineering",
        "aplicacao": "Sessões longas, compactação"
      }
    ],
    "peso_3_medio": [
      {
        "dica": "Subagentes para investigação preservam contexto principal",
        "fonte": "code.claude.com/docs/en/best-practices",
        "aplicacao": "Pesquisa em codebase grande"
      },
      {
        "dica": "Git operations via Claude (90%+ casos)",
        "fonte": "anthropic.com/engineering/claude-code-best-practices",
        "aplicacao": "Commits, PRs, histórico"
      },
      {
        "dica": "Sessões nomeadas (/rename) para continuidade",
        "fonte": "code.claude.com/docs/en/best-practices",
        "aplicacao": "Projetos multi-sessão"
      },
      {
        "dica": "Hooks para ações determinísticas obrigatórias",
        "fonte": "code.claude.com/docs/en/best-practices",
        "aplicacao": "Linting, formatação automática"
      }
    ],
    "peso_2_baixo": [
      {
        "dica": "Multi-Claude parallel (writer/reviewer)",
        "fonte": "anthropic.com/engineering/claude-code-best-practices",
        "aplicacao": "Code review rigoroso"
      },
      {
        "dica": "Fan-out para migrações em massa",
        "fonte": "anthropic.com/engineering/claude-code-best-practices",
        "aplicacao": "Refatorações grandes"
      },
      {
        "dica": "Headless mode (-p) para CI/CD",
        "fonte": "code.claude.com/docs/en/best-practices",
        "aplicacao": "Automação, scripts"
      }
    ]
  },

  "comandos_essenciais": {
    "gestao_contexto": {
      "/clear": "Reset total do contexto",
      "/compact": "Compactar preservando essenciais",
      "/compact Focus on X": "Compactar priorizando tema X"
    },
    "navegacao": {
      "/rewind": "Voltar a checkpoint anterior",
      "/resume": "Retomar sessão anterior",
      "/rename": "Nomear sessão para referência"
    },
    "configuracao": {
      "/init": "Gerar CLAUDE.md inicial",
      "/permissions": "Gerenciar allowlist de comandos",
      "/hooks": "Configurar hooks automáticos"
    },
    "referencias": {
      "@arquivo": "Incluir arquivo no contexto",
      "@pasta/": "Referenciar pasta inteira"
    }
  },

  "templates_prompt": {
    "tarefa_com_verificacao": {
      "estrutura": "[TAREFA]: {desc}\n[CONTEXTO]: @{arquivos}\n[CRITÉRIO]: {testes}\n[VERIFICAÇÃO]: {comando}",
      "uso": "Toda implementação de código"
    },
    "investigacao_focada": {
      "estrutura": "Use subagente para investigar:\n- {pergunta1}\n- {pergunta2}\nEscopo: {pastas}\nRetorne: resumo <500 palavras",
      "uso": "Pesquisa em codebase"
    },
    "refatoracao_controlada": {
      "estrutura": "[TAREFA]: Refatorar {x}\n[RESTRIÇÕES]:\n- Só mudanças para {objetivo}\n- NÃO features extras\n- NÃO abstrações novas",
      "uso": "Refatorações focadas"
    },
    "debug_estruturado": {
      "estrutura": "[ERRO]: {msg}\n[ARQUIVO]: @{path}\n[OBJETIVO]: Causa raiz, não sintoma\n[VERIFICAÇÃO]: {passos}",
      "uso": "Correção de bugs"
    }
  },

  "anti_padroes": [
    {
      "nome": "Sessão acumulativa",
      "sintoma": "Tarefas diferentes misturadas",
      "correcao": "/clear entre tópicos distintos"
    },
    {
      "nome": "Loop de correção",
      "sintoma": "Mesmo erro 3+ vezes",
      "correcao": "/clear + prompt refinado"
    },
    {
      "nome": "CLAUDE.md enciclopédico",
      "sintoma": ">200 linhas",
      "correcao": "Podar para essenciais"
    },
    {
      "nome": "Confiança cega",
      "sintoma": "Código sem teste",
      "correcao": "Sempre verificar"
    },
    {
      "nome": "Exploração infinita",
      "sintoma": "100+ arquivos lidos",
      "correcao": "Subagente ou escopo restrito"
    },
    {
      "nome": "Over-engineering",
      "sintoma": "Abstrações não solicitadas",
      "correcao": "Prompt explícito limitante"
    }
  ],

  "protocolo_sessao": {
    "inicio": [
      "Verificar % contexto disponível",
      "Avaliar complexidade da tarefa",
      "Decidir modo (direto/plan)",
      "Identificar critérios de verificação"
    ],
    "durante": [
      "Monitorar uso de tokens",
      "/clear entre tarefas distintas",
      "Subagente para investigações pesadas",
      "Verificar após cada implementação",
      "Reset se 2+ falhas consecutivas"
    ],
    "fim": [
      "Verificar critérios atendidos",
      "Commit se solicitado",
      "Documentar estado se incompleto",
      "/rename para referência futura"
    ]
  },

  "instrucoes_ia": {
    "prioridade_maxima": [
      "Gestão de contexto (Leis 1,3)",
      "Verificação obrigatória (Lei 2)"
    ],
    "antes_tarefa": [
      "Verificar % contexto",
      "Identificar critério sucesso",
      "Decidir modo (direto/plan)"
    ],
    "durante_execucao": [
      "Monitorar tokens",
      "Reset se necessário",
      "Verificar incrementalmente"
    ],
    "ao_encontrar_problemas": {
      "duas_falhas": "/clear + refinar prompt",
      "investigacao_grande": "usar subagente",
      "incerteza": "Plan Mode"
    },
    "comportamento_coach": [
      "Sugerir /clear proativamente",
      "Solicitar critérios de verificação",
      "Alertar sobre over-engineering",
      "Recomendar subagentes quando apropriado"
    ]
  }
}
